@import "tailwindcss";

@theme {
  /* Colors */
  --color-border: oklch(0.922 0 0);
  --color-input: oklch(0.922 0 0);
  --color-ring: oklch(0.72 0.15 45);
  --color-background: hsl(0, 0%, 97%);
  --color-background-dark-layer: hsl(0, 0%, 92%);
  --color-background-light: hsl(0, 0%, 100%);
  --color-foreground: hsl(0, 0%, 5%);
  --color-foreground-muted: hsl(0, 0%, 30%);

  /* Chat-specific background - warm orange tint */
  --color-chat-background: hsl(33, 40%, 97%);
  --color-chat-background-dark: hsl(33, 10%, 15%);

  /* Primary orange palette - from lightest to darkest */
  --color-primary-50: hsl(33 96% 97%);
  --color-primary-100: hsl(33, 96%, 94%);
  --color-primary-200: hsl(32, 98%, 88%);
  --color-primary-300: hsl(31, 100%, 78%);
  --color-primary-400: hsl(30, 100%, 64%);
  --color-primary-500: hsl(28, 100%, 52%); /* base orange */
  --color-primary-600: hsl(26, 98%, 44%);
  --color-primary-700: hsl(25, 96%, 34%);
  --color-primary-800: hsl(24, 94%, 24%);
  --color-primary-900: hsl(22, 92%, 14%);

  /* Orange-neutral palette */
  --color-neutral-50: hsl(34 10% 97%); /* warm off-white to match pacing */
  --color-neutral-100: hsl(34 10% 94%);
  --color-neutral-200: hsl(33 12% 88%);
  --color-neutral-300: hsl(32 14% 78%);
  --color-neutral-400: hsl(31 16% 64%);
  --color-neutral-500: hsl(30 18% 52%); /* aligned with other 500s */
  --color-neutral-600: hsl(29 18% 44%);
  --color-neutral-700: hsl(28 16% 34%);
  --color-neutral-800: hsl(27 14% 24%);
  --color-neutral-900: hsl(26 12% 14%);

  /* SUCCESS — warm green (slightly yellow-leaning) */
  --color-success-50: hsl(145 72% 97%);
  --color-success-100: hsl(145, 76%, 94%);
  --color-success-200: hsl(144, 82%, 88%);
  --color-success-300: hsl(143, 90%, 78%);
  --color-success-400: hsl(142, 96%, 64%);
  --color-success-500: hsl(140, 96%, 52%);
  --color-success-600: hsl(139, 94%, 44%);
  --color-success-700: hsl(138, 90%, 34%);
  --color-success-800: hsl(136, 86%, 24%);
  --color-success-900: hsl(134, 82%, 14%);

  /* DANGER — clean red (slightly warmer in lights, deeper toward 0° in darks) */
  --color-danger-50: hsl(12 96% 97%);
  --color-danger-100: hsl(12, 96%, 94%);
  --color-danger-200: hsl(10, 96%, 88%);
  --color-danger-300: hsl(8, 98%, 78%);
  --color-danger-400: hsl(6, 100%, 64%);
  --color-danger-500: hsl(4, 100%, 52%);
  --color-danger-600: hsl(2, 96%, 44%);
  --color-danger-700: hsl(0, 92%, 34%);
  --color-danger-800: hsl(358, 88%, 24%);
  --color-danger-900: hsl(356, 84%, 14%);

  /* WARNING — amber (distinct from your primary orange; slightly more yellow) */
  --color-warning-50: hsl(50 96% 97%);
  --color-warning-50: hsl(50, 96%, 97%);
  --color-warning-100: hsl(50, 96%, 94%);
  --color-warning-200: hsl(49, 96%, 88%);
  --color-warning-300: hsl(48, 98%, 78%);
  --color-warning-400: hsl(48, 100%, 64%);
  --color-warning-500: hsl(47, 100%, 52%); /* base warning */
  --color-warning-600: hsl(46, 96%, 44%);
  --color-warning-700: hsl(46, 92%, 34%);
  --color-warning-800: hsl(45, 88%, 24%);
  --color-warning-900: hsl(45, 84%, 14%);

  /* INFO — cobalt/azure (cool to balance the warm UI) */
  --color-info-50: hsl(220 96% 97%);
  --color-info-100: hsl(220, 96%, 94%);
  --color-info-200: hsl(218, 96%, 88%);
  --color-info-300: hsl(216, 98%, 78%);
  --color-info-400: hsl(214, 100%, 64%);
  --color-info-500: hsl(212, 100%, 52%);
  --color-info-600: hsl(210, 96%, 44%);
  --color-info-700: hsl(208, 92%, 34%);
  --color-info-800: hsl(206, 88%, 24%);
  --color-info-900: hsl(204, 84%, 14%);

  --color-primary-foreground: oklch(0.985 0 0);
  --color-secondary: oklch(0.96 0.01 220);
  --color-secondary-foreground: oklch(0.25 0.02 220);
  --color-destructive: oklch(0.577 0.245 27.325);
  --color-muted: oklch(0.97 0 0);
  --color-accent: oklch(0.95 0.02 150);
  --color-accent-foreground: oklch(0.25 0.08 150);
  --color-popover: oklch(1 0 0);
  --color-popover-foreground: oklch(0.145 0 0);
  --color-card: oklch(1 0 0);
  --color-card-foreground: oklch(0.145 0 0);

  /* Dark mode colors */
  --color-*-dark: initial;
  --color-background-dark: oklch(0.145 0 0);
  --color-background-dark-layer-dark: oklch(0.205 0 0);
  --color-background-light-dark: oklch(0.185 0 0);
  --color-foreground-dark: oklch(0.985 0 0);
  --color-card-dark: oklch(0.205 0 0);
  --color-card-foreground-dark: oklch(0.985 0 0);
  --color-popover-dark: oklch(0.205 0 0);
  --color-popover-foreground-dark: oklch(0.985 0 0);
  --color-primary-dark: oklch(0.922 0 0);
  --color-primary-foreground-dark: oklch(0.205 0 0);
  --color-secondary-dark: oklch(0.269 0 0);
  --color-secondary-foreground-dark: oklch(0.985 0 0);
  --color-muted-dark: oklch(0.269 0 0);
  --color-foreground-muted-dark: oklch(0.708 0 0);
  --color-accent-dark: oklch(0.269 0 0);
  --color-accent-foreground-dark: oklch(0.985 0 0);
  --color-destructive-dark: oklch(0.704 0.191 22.216);
  --color-border-dark: oklch(1 0 0 / 10%);
  --color-input-dark: oklch(1 0 0 / 15%);
  --color-ring-dark: oklch(0.556 0 0);

  /* Sidebar colors */
  --color-sidebar-background: oklch(0.985 0 0);
  --color-sidebar-foreground: oklch(0.145 0 0);
  --color-sidebar-primary: oklch(0.205 0 0);
  --color-sidebar-primary-foreground: oklch(0.985 0 0);
  --color-sidebar-accent: oklch(0.97 0 0);
  --color-sidebar-accent-foreground: oklch(0.205 0 0);
  --color-sidebar-border: oklch(0.922 0 0);
  --color-sidebar-ring: oklch(0.708 0 0);

  --color-sidebar-background-dark: oklch(0.205 0 0);
  --color-sidebar-foreground-dark: oklch(0.985 0 0);
  --color-sidebar-primary-dark: oklch(0.488 0.243 264.376);
  --color-sidebar-primary-foreground-dark: oklch(0.985 0 0);
  --color-sidebar-accent-dark: oklch(0.269 0 0);
  --color-sidebar-accent-foreground-dark: oklch(0.985 0 0);
  --color-sidebar-border-dark: oklch(1 0 0 / 10%);
  --color-sidebar-ring-dark: oklch(0.556 0 0);

  /* Chef theme colors */
  --color-chef-orange: oklch(0.646 0.222 41.116);
  --color-chef-yellow: oklch(0.828 0.189 84.429);
  --color-chef-green: oklch(0.769 0.188 70.08);
  --color-chef-brown: oklch(0.398 0.07 227.392);
  --color-chef-cream: oklch(0.985 0.02 85);

  /* Chart colors */
  --color-chart-1: oklch(0.646 0.222 41.116);
  --color-chart-2: oklch(0.6 0.118 184.704);
  --color-chart-3: oklch(0.398 0.07 227.392);
  --color-chart-4: oklch(0.828 0.189 84.429);
  --color-chart-5: oklch(0.769 0.188 70.08);

  --color-chart-1-dark: oklch(0.488 0.243 264.376);
  --color-chart-2-dark: oklch(0.696 0.17 162.48);
  --color-chart-3-dark: oklch(0.769 0.188 70.08);
  --color-chart-4-dark: oklch(0.627 0.265 303.9);
  --color-chart-5-dark: oklch(0.645 0.246 16.439);

  /* Radius */
  --radius: 0.625rem;

  /* Safe area insets for mobile devices */
  --safe-area-inset-top: env(safe-area-inset-top);
  --safe-area-inset-right: env(safe-area-inset-right);
  --safe-area-inset-bottom: env(safe-area-inset-bottom);
  --safe-area-inset-left: env(safe-area-inset-left);

  --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.1);
}

@layer utilities {
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Safe area utilities for mobile devices */
  .safe-area-top {
    padding-top: max(1rem, var(--safe-area-inset-top));
  }

  .safe-area-bottom {
    padding-bottom: max(1rem, var(--safe-area-inset-bottom));
  }

  .pb-safe {
    padding-bottom: max(0.75rem, var(--safe-area-inset-bottom));
  }

  .pt-safe {
    padding-top: max(0.75rem, var(--safe-area-inset-top));
  }

  /* Mobile viewport handling */
  .mobile-viewport {
    height: 100dvh; /* Dynamic viewport height for mobile */
    /* Use small viewport height to avoid keyboard overlap */
    @supports (height: 100svh) {
      height: 100svh; /* Small viewport height - excludes keyboard */
    }
  }

  .mobile-content {
    min-height: 0;
    height: 100%;
    height: 100dvh;
    /* Use small viewport height to avoid keyboard overlap */
    @supports (height: 100svh) {
      height: 100svh;
    }
  }

  /* Mobile-specific layout fixes */
  @media (max-width: 768px) {
    /* Prevent document scrolling on mobile */
    html,
    body {
      overflow: hidden;
      height: 100dvh;
      position: fixed;
      width: 100%;
    }

    #root {
      height: 100dvh;
      overflow: hidden;
    }

    .chat-input-container {
      /* Use small viewport units when available for keyboard compatibility */
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 50;
    }

    /* Exception for meal plan input - don't use fixed positioning */
    .meal-plan-input {
      position: relative !important;
      bottom: auto !important;
      left: auto !important;
      right: auto !important;
      z-index: auto !important;
    }
  }
}

@layer components {
  .markdown-content p,
  .markdown-content ul,
  .markdown-content ol {
    margin-bottom: 0.5rem;
  }

  /* Custom badge variants for macros - targeting all possible selectors */
  .badge-protein,
  [class*="badge-protein"] {
    background-color: oklch(0.6 0.2 140) !important;
    color: white !important;
    border-color: oklch(0.6 0.2 140) !important;
  }

  .badge-carbs,
  [class*="badge-carbs"] {
    background-color: oklch(0.55 0.2 260) !important;
    color: white !important;
    border-color: oklch(0.55 0.2 260) !important;
  }

  .badge-fat,
  [class*="badge-fat"] {
    background-color: oklch(0.72 0.15 45) !important;
    color: white !important;
    border-color: oklch(0.72 0.15 45) !important;
  }

  /* Custom progress bar colors - comprehensive targeting */
  .progress-protein [data-state="complete"],
  .progress-protein .bg-primary,
  .progress-protein > div > div,
  .progress-protein [role="progressbar"] > div,
  .progress-protein div[data-state="complete"],
  .progress-protein * {
    background-color: oklch(0.6 0.2 140) !important;
  }

  .progress-carbs [data-state="complete"],
  .progress-carbs .bg-primary,
  .progress-carbs > div > div,
  .progress-carbs [role="progressbar"] > div,
  .progress-carbs div[data-state="complete"],
  .progress-carbs * {
    background-color: oklch(0.55 0.2 260) !important;
  }

  .progress-fat [data-state="complete"],
  .progress-fat .bg-primary,
  .progress-fat > div > div,
  .progress-fat [role="progressbar"] > div,
  .progress-fat div[data-state="complete"],
  .progress-fat * {
    background-color: oklch(0.72 0.15 45) !important;
  }

  /* Custom properties for progress bars */
  .progress-protein {
    --color-primary: oklch(0.6 0.2 140);
  }

  .progress-carbs {
    --color-primary: oklch(0.55 0.2 260);
  }

  .progress-fat {
    --color-primary: oklch(0.72 0.15 45);
  }

  /* Calories progress bar - green color */
  .progress-calories [data-state="complete"],
  .progress-calories .bg-primary,
  .progress-calories > div > div,
  .progress-calories [role="progressbar"] > div,
  .progress-calories div[data-state="complete"],
  .progress-calories * {
    background-color: #10b981 !important;
  }

  .progress-calories {
    --color-primary: #10b981;
  }

  /* Remove orange outline from dialogs and center them */
  [role="dialog"],
  [data-state="open"] {
    outline: none !important;
    border: none !important;
    box-shadow:
      0 10px 15px -3px rgb(0 0 0 / 0.1),
      0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
  }

  [role="dialog"]:focus,
  [role="dialog"]:focus-visible {
    outline: none !important;
    ring: none !important;
    box-shadow:
      0 10px 15px -3px rgb(0 0 0 / 0.1),
      0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
  }

  /* Fix dialog centering */
  [data-radix-dialog-overlay] {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  [data-radix-dialog-content] {
    position: relative !important;
    transform: none !important;
    top: auto !important;
    left: auto !important;
    right: auto !important;
    bottom: auto !important;
  }

  /* Softer button hover states */
  .btn-soft-orange {
    background-color: oklch(0.72 0.15 45);
    transition: all 0.2s ease;
  }

  .btn-soft-orange:hover {
    background-color: oklch(0.68 0.18 45);
  }

  /* Custom grade colors that are softer */
  .grade-a {
    background-color: oklch(0.65 0.15 150);
  }

  .grade-b {
    background-color: oklch(0.6 0.12 220);
  }

  .grade-c {
    background-color: oklch(0.62 0.12 60);
  }

  .grade-d {
    background-color: oklch(0.55 0.15 15);
  }

  /* Slide up animation for input bar */
  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideDown {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(100%);
      opacity: 0;
    }
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out forwards;
  }

  .animate-slide-down {
    animation: slideDown 0.3s ease-in forwards;
  }

  /* Shake animation for shopping cart button */
  @keyframes shake {
    0%,
    100% {
      transform: translateX(0);
    }
    10%,
    30%,
    50%,
    70% {
      transform: translateX(-0.75px);
    }
    20%,
    40%,
    60% {
      transform: translateX(0.75px);
    }
  }

  .animate-shake {
    animation: shake 1s ease-in-out;
  }

  /* Pop animation for notification badge */
  @keyframes popIn {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes popOut {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(0);
      opacity: 0;
    }
  }

  .animate-pop-in {
    animation: popIn 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .animate-pop-out {
    animation: popOut 0.2s ease-in forwards;
  }

  /* Slide animations for sidebar */
  @keyframes slideInFromLeft {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slideOutToLeft {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }

  @keyframes slideInFromRight {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slideOutToRight {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(100%);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  /* Apply animations based on data-state attribute */
  [data-state="open"][data-side="left"] {
    animation: slideInFromLeft 0.35s cubic-bezier(0.16, 1, 0.3, 1);
  }

  [data-state="closed"][data-side="left"] {
    animation: slideOutToLeft 0.25s ease-in;
  }

  [data-state="open"][data-side="right"] {
    animation: slideInFromRight 0.35s cubic-bezier(0.16, 1, 0.3, 1);
  }

  [data-state="closed"][data-side="right"] {
    animation: slideOutToRight 0.25s ease-in;
  }

  /* Overlay fade animations - target the correct Radix overlay */
  .fixed.inset-0.z-50[data-state="open"] {
    animation: fadeIn 0.3s ease-out;
  }

  .fixed.inset-0.z-50[data-state="closed"] {
    animation: fadeOut 0.2s ease-in;
  }

  /* Chat-specific animations */

  /* Message slide-in animation */
  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(12px) scale(0.96);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .animate-message-slide-in {
    animation: messageSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Typing indicator dots */
  @keyframes typingDot {
    0%, 60%, 100% {
      transform: translateY(0);
      opacity: 0.7;
    }
    30% {
      transform: translateY(-8px);
      opacity: 1;
    }
  }

  .animate-typing-dot {
    animation: typingDot 1.4s ease-in-out infinite;
  }

  /* Subtle pulse for sparkles icon */
  @keyframes pulseSubtle {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.05);
    }
  }

  .animate-pulse-subtle {
    animation: pulseSubtle 2.5s ease-in-out infinite;
  }

  /* Wave animation for typing letters */
  @keyframes waveLetter {
    0%, 60%, 100% {
      transform: translateY(0);
    }
    30% {
      transform: translateY(-4px);
    }
  }

  .animate-wave-letter {
    animation: waveLetter 1.5s ease-in-out infinite;
  }

  /* Smooth scroll behavior */
  .scroll-smooth {
    scroll-behavior: smooth;
  }

  /* Glow effect for input on focus */
  @keyframes inputGlow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(249, 115, 22, 0.15);
    }
    50% {
      box-shadow: 0 0 30px rgba(249, 115, 22, 0.25);
    }
  }

  .chat-input-container form:focus-within {
    animation: inputGlow 2s ease-in-out infinite;
  }

  /* Heart beat animation for saved recipe */
  @keyframes heartBeat {
    0%, 100% {
      transform: scale(1);
    }
    10%, 30% {
      transform: scale(0.9);
    }
    20%, 40% {
      transform: scale(1.1);
    }
  }

  .animate-heart-beat {
    animation: heartBeat 0.6s ease-in-out;
  }

  /* Tag appear animation */
  @keyframes tagAppear {
    from {
      opacity: 0;
      transform: scale(0.8) translateY(4px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .animate-tag-appear {
    animation: tagAppear 0.3s cubic-bezier(0.16, 1, 0.3, 1) backwards;
  }

  /* Slide in from bottom */
  @keyframes slideInBottom {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-in {
    animation: slideInBottom 0.3s ease-out;
  }

  /* Custom scrollbar for tags */
  .scrollbar-thin::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 9999px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
  }

  /* Custom smooth untoggle animation for preference tags with fade effect */
  @keyframes tagUntoggle {
    0% {
      background: linear-gradient(to bottom right, rgb(249 115 22), rgb(234 88 12));
      color: white;
      transform: scale(1.05);
      box-shadow: 0 10px 15px -3px rgb(251 146 60 / 0.5), 0 4px 6px -4px rgb(251 146 60 / 0.5);
      opacity: 1;
    }
    25% {
      background: linear-gradient(to bottom right, rgb(254 215 170), rgb(253 186 116));
      color: rgb(156 163 175);
      transform: scale(1.03);
      box-shadow: 0 7px 12px -3px rgb(251 146 60 / 0.35), 0 3px 5px -2px rgb(251 146 60 / 0.35);
      opacity: 0.95;
    }
    50% {
      background: linear-gradient(to bottom right, rgb(254 243 199), rgb(253 230 138));
      color: rgb(107 114 128);
      transform: scale(1.015);
      box-shadow: 0 4px 8px -3px rgb(251 146 60 / 0.2), 0 2px 4px -2px rgb(251 146 60 / 0.2);
      opacity: 0.9;
    }
    75% {
      background: linear-gradient(to bottom right, rgb(255 251 235), rgb(254 252 232));
      color: rgb(75 85 99);
      transform: scale(1.005);
      box-shadow: 0 2px 4px -2px rgb(0 0 0 / 0.1);
      opacity: 0.95;
    }
    100% {
      background: white;
      color: rgb(55 65 81);
      transform: scale(1);
      box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      opacity: 1;
    }
  }

  .tag-untoggle {
    animation: tagUntoggle 900ms cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  /* Waveform animation for voice recording */
  @keyframes waveform {
    0%, 100% {
      height: 4px;
    }
    50% {
      height: 16px;
    }
  }

  .animate-waveform {
    animation: waveform 1.2s ease-in-out infinite;
  }
}
